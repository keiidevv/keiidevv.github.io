---
title: HTTP 완벽 가이드 | HTTP 개관
author: serin
date: 2024-10-16 18:20:00 +0900
categories: [CS, Network]
tags: [Http]
image:
  path: /assets/img/CS/Network/2024/10/16/main.png
  alt: main
---

## 💡 [HTTP 완벽 가이드](https://www.yes24.com/Product/Goods/15381085)

### 1.1 HTTP: 인터넷의 멀티미디어 배달부

HTTP는 **전 세계의 웹 서버로부터** 대량의 정보를 빠르고, 간편하고, 정확하게 사람들의 PC에 설치된 웹 브라우저로 옮겨준다.  
또한, **신뢰성** 있는 데이터 전송 프로토콜을 사용하기 때문에, 전송 중 손상되거나 꼬이지 않음을 보장한다. 어떻게 우베 트래픽을 전송하는지 자세히 알아보자!

![ham](/assets/img/CS/Network/2024/10/16/hamham.png){: .w-40 .normal}
_이 두꺼운 책을 마스터하겠어..!_

### 1.2 웹 클라이언트와 서버

- 웹 서버 = HTTP 서버 = 웹 콘텐츠마다 존재
  - HTTP 프로토콜로 의사소통
  - 클라이언트가 보낸 HTTP 요청을 HTTP 응답으로 돌려준다.

### 1.3 리소스

- 웹 리소스
  - 웹 콘텐츠의 원천
  - 웹 서버가 관리하는 모든 종류의 파일이다.
  - 정적 파일, 동적 콘텐츠 등등 모든 것들이 될 수 있다.
    - *스프레트 시트 파일, 웹 게이트웨이, 인터넷 검색 엔진 등등 모두*

#### 1.3.1 미디어 타입

이렇듯 리소스에는 수많은 데이터 타입이 존재하고, 인터넷은 수많은 파일들을 관리하기 때문에 HTTP는 웹에서 전송되는 객체 각각에 신중하게 MIME 타입이라는 데이터 포맷 라벨을 붙인다.  
**MIME(Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장)** 은 각기 다른 전자메일 시스템 사이에서 메시지가 오갈 때 겪는 문제점을 해결하기 위해 설계되었다.  
인터넷 할당 번호 관리 기관에서 모든 [미디어 타입](https://www.iana.org/assignments/media-types/media-types.xhtml)의 최신 전체 목록을 찾을 수 있다.

일반적으로 MIME 타입은 사선(/)으로 구분된다.  
> type/subtype
{: .prompt-info }

- **type**은 `video`나 `text`와 같이 데이터 타입이 속하는 일반 카테고리이다.
  - type에는 개별 타입과 multipart 타입 2가지 클래스가 존재한다.
    - 개별 타입 : 위 예시와 같이 단일 텍스트나 단일 비디오, 파일을 나타내는 타입이다.
    - multipart 타입 : 여러 컴포넌트 조각으로 구성된 문서이다. 하나의 트랜잭션으로 함께 전송되는 여러 파일을 캡슐화할 수 있다. (예를 들어, 이메일에 여러 파일을 첨부할 때 multipart MIME 타입을 사용)
- **subtype**은 MIME 타입이 나타낸느 지정된 타입의 정확한 데이터 종류를 식별한다.
  - text/plain(평문 텍스트), `text/html` 등이 있다.

추가적인 세부 정보를 제공하기 위해 선택적 매개변수를 추가할 수 있다.
> type/subtype;parameter=value
{: .prompt-info }
예를 들어, `text/plain;carset=UTF-8` 과 같이 사용한다.

주로 웹 개발자들에게 중요한 MIME 타입은 아래와 같다.
1. `application/octet-stream`
   1. 이진 파일을 위한 기본값
   2. 이 타입은 '잘 알려지지 않은' 이진 파일을 의미한다.
2. `text/plain`
   1. 텍스트 파일에 대한 기본값
   2. 단, 모든 종류의 텍스트 데이터를 의미하지는 않으므로 반드시 일치하지 않을 수 있다!
3. `text/css`
   1. 웹 페이지의 CSS 파일들은 text/css 파일이 **되어야만 한다**.
   2. `.css` 파일들을 CSS 파일로 인식하지 못하면, `text/plain`, `application/octet-stream` MIME 타입으로 전송할수도 있다.
4. `text/html`
   1. 모든 HTML 컨텐츠는 이 타입과 함께 제공된다.
5. `text/javascript`
   1. IANA 미디어 타입마다, RFC 9239 및 HTML 명세, Javascript 컨텐츠는 MIME 타입 `text/javascript`를 사용해서 제공되어야 한다.
   2. 다른 MIME 타입은 Javascript에 유효한 것으로 간주되지 않는다.
   3. 이외의 MIME 타입을 사용하면 스크립트가 로드되거나 실행되지 않을 수 있다.
6. `multipart/form-data`
   1. 브라우저에서 서버로 완성된 HTML Form의 내용을 전송 시 사용한다.
   2. 다중부분 문서 형식이다.
   3. '--' 경계로 구분되어 다른 파트들로 구성된다.

이와 같이, 다양한 타입들이 존재하며, 정확한 MIME 타입을 설정하는 것이 매우 중요하다.

#### 1.3.2 URI, URL
서버 리소스 이름은 **통합 자원 식별자(uniform resource identifier, URI)**로 불린다. URI는 인터넷의 우편물 주소와 같은 것이므로, 정보 리소스를 고유하게 식별하고 위치를 지정할 수 있다.  
URI의 하위 개념으로 URL, URN이 있다.

**통합 자원 지시자(uniform resource locator, URL)** 은 리소스 식별자의 가장 흔한 형태이다.  
URL은 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다. 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지를 분명히 알려준다.

URL은 여러 부분으로 구성된다.
![url](/assets/img/CS/Network/2024/10/16/url.png){: .w-75 .normal}
_출처 : https://developer.mozilla.org/ko/docs/Learn_
1. Scheme
   1. 브라우저가 리소스를 요청하는 데 사용해야 하는 프로토콜을 나타낸다.
      1. 프로토콜은 컴퓨터 네트워크에서 데이터를 교환하거나 전송하기 위한 설정 방법
   2. 일반적으로 프로토콜은 HTTPS 또는 HTTP이다.
2. Authority
   1. 스키마와 권한의 구분 기호는 `://` 이다.
   2. 도메인과 포트를 제공한다.
      1. 도메인은 요청하는 웹 서버를 나타낸다.
      2. 포트는 웹 서버의 리소스에 접근하는 데 사용되는 기술적인 *게이트*를 나타낸다. 웹 서버가 리소스에 대한 액세스 권한을 부여하기 위해 HTTP 프로토콜의 표준 포트(HTTP=80, HTTPS=443)를 사용하는 경우엔 일반적으로 생략한다.
3. Path to resource
  1. 웹 서버에 있는 리소스의 경로이다.
  2. 웹 초기에는 실제 파일의 위치를 나타냈으나, 현재는 대부분 물리적 실체가 없으므로 추상적으로 처리핳ㄴ다.
4. Parameter
   1. 웹 서버에 제공되는 추가 매개변수이다.
   2. 각 웹 서버에는 매개변수에 관한 고유한 규칙이 있으며 특정 웹 서버가 매개변수를 처리하는지 알 수 있는 유일한 방법은 웹 서버 소유자에게 물어보는 것이다.
5. Anchor
   1. 앵커는 리소스 내부에서 일종의 책갈피 역할을 하며, 브라우저에 해당 책갈피 지점의 콘텐츠를 표시하도록 지시한다.
   2. 예를 들어, 브라우저가 앵커가 정의된 지점으로 스크롤한다.
   3. 프레그먼트 식별자 라고도 한다.

### 1.4 트랜잭션
HTTP 트랜잭션은 요청 명령과 응답 결과로 구성되어 있다. 이 상호작용은 HTTP 메세지라고 불리는 정형화된 데이터 덩어리를 이용해 이루어진다.

#### 1.4.1 메서드
HTTP는 메서드라고 불리는 여러 가지 종류의 요청 명령을 지원한다. 메서드는 서버에게 어떤 동작을 취해져야 하는지 말해준다.

| HTTP 메서드 | 설명                                                              |
| :---------- | :---------------------------------------------------------------- |
| GET         | 서버 -> 클라이언트, 지정한 리소스를 보내기                        |
| PUT         | 클라이언트 -> 서버, 보낸 데이터를 지정한 이름의 리소스로 저장하기 |
| DELETE      | 지정한 리소스를 서버에서 삭제하기                                 |
| POST        | 클라이언트 -> 서버, 서버 게이트웨이 애플리케이션으로 보내기       |
| HEAD        | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내기            |

#### 1.4.2 상태 코드
모든 HTTP 응답 메세지는 상태 코드와 함께 반환된다. 상태 코드는 클라이언트에게 요청이 성공했는지 실패했는지 알려주는 세 자리 숫자이다.

#### 1.4.3 웹 페이지는 여러 객체로 이루어질 수 있다.
애플리케이션은 보통 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행한다. 즉, '웹페이지'는 보통 하나의 리소스가 아닌 리소스의 모음이다.

### 1.5 메시지
![message](/assets/img/CS/Network/2024/10/16/message.png){: .w-75 .normal}
_출처 : https://developer.mozilla.org/ko/docs/Web/HTTP/Messages_
요청과 응답은 해당 구조를 가지고 있다. 각각의 위치에 따라 역할이 다르다.

### 1.6 TCP 커넥션
어떻게 메시지가 TCP(Transmission Control Protocol, 전송 제어 프로토콜) 커넥션을 통해 한 곳에서 다른 곳으로 옮겨가는지 알아 보자.

#### 1.6.1 TCP/IP
HTTP는 애플리케이션 계층 프로토콜이다. 핵심적인 네트워크 세부사항은 TCP/IP에 맡긴다.

TCP는 다음을 제공한다.
- 오류 없는 데이터 전송
- 순서에 맞는 전달
- 조각나지 않는 데이터 스트림

TCP/IP는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합니다. 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 의사소통을 하게 해 준다.  
일단 TCP 커넥션이 맺어지면 클라이언트와 서버 컴퓨터 간에 교환되는 메세지가 없어지거나, 손상되거나, 순서가 뒤바뀌어 수신되는 일은 결코 없다.

프로토콜 스택은 계층화된 구조로 모여있는 프로토콜들의 집합니다. 네트워크 개념상, HTTP 프로토컬은 TCP 위의 계층이다.
![TCP/IP stack](/assets/img/CS/Network/2024/10/16/tcp-ip-stack.png){: .w-75 .normal}
_출처 : https://has3ong.github.io/computer%20science/protocol-stack/_

#### 1.6.2 접속, IP 주소, 포트 번호
HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에, 인터넷 프로토콜(Internet Protocol, IP) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 한다.

> TCP 커넥션을 맺는 것은 다른 회사 사무실에 전화를 거는 것과 비슷하다.
{: .prompt-info }

즉, TCP에서는 서버 컴퓨터에 대한 IP 주소와 그 서버에서 실행중인 프로그램이 사용 중인 포트 번호가 필요하다.  
그렇다면 어떻게 해당 주소를 알아낼 수 있을까? URL을 이용하면 알 수 있다. 당연히 URL은 그 리소스를 가지고 있는 장비에 대한 정보를 알려줄 수 있다.

따라서 아래 순서대로 통신이 진행된다.
1. 서버의 URL에서 호스트명 추출
2. 서버의 호스트명을 IP로 변환
3. URL에서 포트번호 추출
4. 웹 서버와 TCP 커넥션을 맺음
5. 서버에 HTTP 요청 전송
6. 서버는 웹브라우저에 HTTP 응답 전송
7. 커넥션이 닫히면, 웹브라우저는 문서를 출력

### 1.8 웹 구성요소
#### 1.8.1 프록시
프록시 서버는 인터넷 상의 여러 네트워크들에 접속할 때 중계 역할을 해주는 서버이다. 주로 보안을 위해 사용된다.

- **포워드 프록시(forward proxy)**는 인터넷 상에서 어디로든지 요청을 전송해주는 프록시
- **리버스 프록시(reverse proxy)**는 인터넷에서 요청을 받으면, 내부망 내의 서버로 전송

#### 1.8.2 캐시
웹캐시와 캐시 프록시는 자신을 거쳐 가는 문서들 중 자주 찾는 것의 사본을 저장해 두는, 특별한 종류의 HTTP 프록시 서버이다.  
클라이언트는 멀리 떨어진 웹 서버보다 근처의 캐시에서 훨씬 더 빨리 문서를 다운 받을 수 있다.

#### 1.8.3 게이트웨이
게이트웨이는 다른 서버들의 중재자로 동작하는 특별한 서버이다. 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용된다.  
HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아들인 뒤, FTP 프로토콜을 이용해 문서를 가져온다. 받아온 문서는 HTTP 메시지에 담겨 클라이언트에게 보낸다.

#### 1.8.4 터널
터널은 두 커넥션 사이에서 로우 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션이다. HTTP 터널은 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용된다. 

#### 1.8.5 에이전트
사용자 에이전트는 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램이다.  
웹 요청을 만드는 애플리케이션은 뭐든 HTTP 에이전트이다. 

여기까지 HTTP에 대해 간단하게 살펴보았다. 중간 중간 MDN 웹 문서도 함께 참고하였는데, 각 장마다 같이 읽으면 매우 도움이 될 것 같다!
